<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arquivo Central | A∴ R∴ L∴ M∴ Fraternidade Imperial Nº 264</title>
    
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --dark-navy: #001529;
            --royal-blue: #002a52;
            --gold: #d4af37;
            --gold-light: #f3e5ab;
            --glass-bg: rgba(255, 255, 255, 0.05);
            --gold-shadow: rgba(212, 175, 55, 0.5);
            --blue-deep: #000c18;
            --text-main: #e2e8f0;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; scroll-behavior: smooth; }

        body { 
            font-family: 'Lato', sans-serif; 
            background: radial-gradient(circle at center, var(--royal-blue) 0%, var(--blue-deep) 100%);
            color: var(--text-main); min-height: 100vh; padding-bottom: 0;
            overflow-x: hidden; position: relative;
            display: flex; flex-direction: column; align-items: center;
        }

        h1, h2, h3, .cinzel { font-family: 'Cinzel', serif; color: var(--gold); }

        /* CANVAS FUNDO TOTALMENTE INTOCÁVEL */
        #constellation-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -2; pointer-events: none !important; background: transparent; }

        /* --- HEADER BÁSICO (APARECE APÓS LOGIN SEM PULAR) --- */
        header#dossie-header { 
            position: fixed; top: 0; left: 0; width: 100%; z-index: 1000; padding: 15px 0; 
            background: rgba(0, 12, 24, 0.95); backdrop-filter: blur(10px); 
            border-bottom: 1px solid rgba(212, 175, 55, 0.3);
            display: flex; justify-content: center; align-items: center;
            opacity: 0; pointer-events: none; transition: opacity 0.8s ease; 
        }
        header#dossie-header.visible { opacity: 1; pointer-events: auto; }
        
        .header-nav-inner { display: flex; justify-content: center; gap: 20px; align-items: center; max-width: 1200px; width: 100%; padding: 0 20px;}
        .nav-link { 
            color: #fff; text-decoration: none; font-family: 'Cinzel'; text-transform: uppercase; 
            font-size: 0.85rem; letter-spacing: 1px; transition: 0.3s; 
            display: flex; align-items: center; gap: 8px; 
            border: 1px solid var(--gold); padding: 8px 20px; border-radius: 4px;
        }
        .nav-link:hover { background: var(--gold); color: #000; box-shadow: 0 0 15px var(--gold-shadow); }

        /* --- POPUP SENHA --- */
        #password-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100vh;
            background: rgba(0, 5, 10, 0.98); z-index: 9999; 
            display: flex; justify-content: center; align-items: center;
            transition: opacity 0.5s ease; backdrop-filter: blur(10px);
        }
        
        .auth-box {
            text-align: center; border: 1px solid var(--gold); 
            padding: 40px 30px; border-radius: 12px; background: rgba(0,0,0,0.85); 
            width: 90%; max-width: 450px; 
            box-shadow: 0 0 60px rgba(212, 175, 55, 0.25); 
            animation: popIn 0.5s ease forwards; position: relative; overflow: hidden;
            margin: auto; z-index: 10000;
        }
        
        .auth-box::after {
            content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
            background: linear-gradient(to bottom right, transparent, transparent, rgba(212, 175, 55, 0.1), transparent, transparent);
            transform: rotate(45deg); animation: shimmer 3s infinite;
            pointer-events: none !important; 
        }

        .auth-box i.fa-lock { font-size: 3rem; margin-bottom: 15px; color: var(--gold); position: relative; z-index: 2;}
        .auth-box h2 { font-family: 'Cinzel', serif; font-size: 1.5rem; margin-bottom: 15px; color: var(--gold); position: relative; z-index: 2;}
        .cand-label { font-family: 'Lato', sans-serif; color: #bbb; font-size: 0.75rem; margin-bottom: 5px; letter-spacing: 2px; position: relative; z-index: 2;}
        .cand-name-auth { color: var(--gold); font-size: 0.85rem; margin-bottom: 25px; letter-spacing: 1px; font-family: 'Lato', sans-serif; position: relative; z-index: 2;}

        .auth-input {
            width: 100%; padding: 15px; font-size: 1rem; border-radius: 5px; border: 1px solid var(--gold);
            background: rgba(255,255,255,0.08); color: var(--gold); text-align: center; outline: none;
            margin-bottom: 20px; letter-spacing: 4px; transition: 0.3s; position: relative; z-index: 10001; pointer-events: auto !important;
        }
        .auth-input:focus { background: rgba(255,255,255,0.15); box-shadow: 0 0 15px rgba(212,175,55,0.3); }

        .auth-btn {
            display: block; width: 100%; padding: 12px 20px; background: linear-gradient(45deg, var(--gold), #bfa15f); 
            color: #000; font-family: 'Cinzel'; font-weight: bold; border: none; border-radius: 4px; 
            cursor: pointer; transition: transform 0.2s; text-transform: uppercase; letter-spacing: 2px; font-size: 1rem;
            position: relative; z-index: 10001; pointer-events: auto !important; margin-bottom: 20px;
        }
        .auth-btn:hover { transform: scale(1.02); box-shadow: 0 0 15px var(--gold-shadow); }

        .auth-links { display: flex; justify-content: center; gap: 15px; position: relative; z-index: 10001; pointer-events: auto !important; width: 100%;}
        .btn-voltar {
            flex: 1; padding: 10px; background: transparent; border: 1px solid rgba(212, 175, 55, 0.5); border-radius: 4px;
            color: var(--gold); text-decoration: none; font-family: 'Cinzel'; font-size: 0.75rem;
            transition: 0.3s; text-transform: uppercase; letter-spacing: 1px; display: inline-flex; align-items: center; justify-content: center; gap: 5px;
        }
        .btn-voltar:hover { background: rgba(212, 175, 55, 0.1); border-color: var(--gold); }

        .error-msg { color: #ff4c4c; font-family: 'Lato'; font-size: 0.85rem; margin-bottom: 15px; display: none; height: 20px; position: relative; z-index: 5;}


        /* --- MAIN CONTENT (ARQUIVO) --- */
        #main-content {
            width: 100%; display: none; flex-direction: column; align-items: center; 
            margin-top: 100px; flex: 1; opacity: 0; transition: opacity 0.8s ease;
            /* REMOVIDO: filter: blur(20px); para evitar que a tela fique opaca */
        }
        #main-content.visible { opacity: 1; }

        .container { 
            text-align: center; position: relative; z-index: 2; 
            width: 100%; max-width: 1200px; padding: 20px;
        }
        
        .brasao-container {
            width: 160px; height: 160px; margin: 0 auto 20px; border-radius: 50%;
            box-shadow: 0 0 40px rgba(212, 175, 55, 0.3); animation: float 6s ease-in-out infinite;
            background: rgba(0,0,0,0.3); padding: 10px; border: 1px solid rgba(212, 175, 55, 0.3);
        }
        .brasao-img { width: 100%; height: 100%; object-fit: cover; border-radius: 50%; border: 3px solid var(--gold); }

        .page-title { 
            font-family: 'Cinzel', serif; font-size: 2.2rem; line-height: 1.2; letter-spacing: 2px; margin-bottom: 5px; 
            background: linear-gradient(to bottom, #fff, #d4af37); -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 4px 10px rgba(0,0,0,0.6));
        }
        .page-title span { font-size: 1.6rem; white-space: nowrap; }
        
        .subtitle { font-family: 'Lato', sans-serif; letter-spacing: 3px; font-size: 0.9rem; opacity: 0.8; margin-bottom: 40px; text-transform: uppercase; color: var(--gold-light); }

        /* --- BUSCADOR APRIMORADO --- */
        .search-container { width: 100%; max-width: 800px; margin: 0 auto 40px; position: relative; z-index: 5; }
        .search-input {
            width: 100%; padding: 15px 20px 15px 60px; /* Espaço pro ícone */
            font-size: 1rem; border-radius: 50px; 
            border: 1px solid rgba(212, 175, 55, 0.5); background: rgba(0, 20, 40, 0.6); 
            color: #fff; font-family: 'Lato', sans-serif; outline: none; transition: 0.3s;
            backdrop-filter: blur(5px);
            position: relative; z-index: 1; 
        }
        .search-input::placeholder { color: rgba(255, 255, 255, 0.5); font-style: italic; }
        .search-input:focus { border-color: var(--gold); box-shadow: 0 0 15px rgba(212, 175, 55, 0.3); background: rgba(0, 20, 40, 0.8); }
        .search-icon { 
            position: absolute; left: 25px; top: 50%; transform: translateY(-50%); 
            color: var(--gold); font-size: 1.3rem; pointer-events: none; opacity: 1;
            z-index: 5; /* Lupa por cima da barra */
        }

        /* --- LISTA DE PROCESSOS ARQUIVADOS (3 POR LINHA) --- */
        .process-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); 
            gap: 20px; width: 100%; margin-bottom: 30px;
        }

        .archive-btn {
            display: flex; flex-direction: column; align-items: flex-start; justify-content: space-between; 
            padding: 25px 20px; border: 1px solid rgba(212, 175, 55, 0.4); 
            background: linear-gradient(135deg, rgba(0, 12, 24, 0.8), rgba(0, 42, 82, 0.6)); 
            color: #fff; text-decoration: none; border-radius: 8px;
            transition: all 0.3s; backdrop-filter: blur(5px); box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            position: relative; overflow: hidden; display: none; text-align: left;
            min-height: 160px;
        }
        .archive-btn:hover { background: rgba(0, 42, 82, 0.9); transform: translateY(-5px); border-color: var(--gold); box-shadow: 0 10px 25px rgba(212, 175, 55, 0.2); }

        .cand-info { width: 100%; }
        .card-header-row { display: flex; justify-content: space-between; align-items: center; width: 100%; margin-bottom: 15px;}
        
        /* Box do CIM / Status */
        .cim-box { background: rgba(212, 175, 55, 0.15); border: 1px solid var(--gold); border-radius: 6px; padding: 6px 12px; text-align: center; }
        .cim-box.negado { background: rgba(204, 0, 0, 0.1); border-color: #cc0000; }
        
        .cim-label { font-size: 0.55rem; color: var(--gold); display: block; letter-spacing: 2px; text-transform: uppercase;}
        .cim-label.negado { color: #cc0000; }
        
        .cim-num { font-size: 1rem; font-family: 'Cinzel'; font-weight: bold; color: #fff; letter-spacing: 1px;}
        .cim-num.negado { font-size: 0.8rem; color: #ff6666; font-family: 'Lato';}

        .cand-name { font-size: 1.1rem; font-weight: bold; display: block; font-family: 'Lato', sans-serif; letter-spacing: 1px; color: var(--gold-light); line-height: 1.3; margin-bottom: 10px;}
        
        .status-badge { display: inline-block; padding: 4px 10px; border-radius: 4px; font-size: 0.65rem; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; margin-top: 5px; }
        .st-success { background: #1b5e20; color: #fff; border: 1px solid #2e7d32; }
        .st-denied { background: #880000; color: #fff; border: 1px solid #cc0000; }

        .date-info { font-size: 0.8rem; color: #aaa; display: block; margin-top: 5px;}
        .arrow-bottom { align-self: flex-end; font-size: 1.2rem; opacity: 0.5; transition: transform 0.3s; color: var(--gold); margin-top: 10px;}
        .archive-btn:hover .arrow-bottom { transform: translateX(5px); opacity: 1; }

        /* PAGINAÇÃO */
        #loadMoreBtn { 
            display: inline-block; margin: 20px auto 50px; padding: 15px 40px; 
            background: rgba(212, 175, 55, 0.1); border: 1px solid var(--gold); color: var(--gold); 
            font-family: 'Cinzel'; font-weight: bold; letter-spacing: 2px; cursor: pointer; 
            transition: 0.3s; border-radius: 4px; text-transform: uppercase; font-size: 0.9rem;
        }
        #loadMoreBtn:hover { background: var(--gold); color: #000; box-shadow: 0 0 25px var(--gold-shadow); }

        #no-results-msg { display: none; text-align: center; padding: 30px; font-family: 'Lato'; color: #bbb; background: rgba(255,255,255,0.05); border-radius: 8px; border: 1px dashed rgba(255,255,255,0.2); grid-column: 1 / -1; }

        /* --- FOOTER PADRÃO MOSAICO --- */
        footer { 
            position: relative; width: 100%; background-color: #02050a; 
            background-image: 
                linear-gradient(45deg, rgba(255,255,255,0.06) 25%, transparent 25%, transparent 75%, rgba(255,255,255,0.06) 75%, rgba(255,255,255,0.06)),
                linear-gradient(45deg, rgba(255,255,255,0.06) 25%, transparent 25%, transparent 75%, rgba(255,255,255,0.06) 75%, rgba(255,255,255,0.06));
            background-size: 80px 80px; background-position: 0 0, 40px 40px;
            padding: 80px 0 20px; border-top: 3px solid var(--gold); margin-top: auto; display: none;
        }
        footer::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(to bottom, rgba(0,12,24,0.9) 0%, rgba(0,0,0,0) 20%, rgba(0,0,0,0) 80%, rgba(0,0,0,0.95) 100%);
            z-index: 0; pointer-events: none;
        }
        .footer-grid { position: relative; z-index: 1; display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 40px; text-align: left; padding-bottom: 40px; max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        .footer-col h4 { color: var(--gold); font-family: 'Cinzel'; margin-bottom: 20px; font-size: 1.1rem; text-shadow: 0 2px 5px rgba(0,0,0,0.8);}
        
        .footer-contact p { margin-bottom: 12px; font-size: 0.9rem; color: #ddd; display: flex; align-items: flex-start; gap: 10px; text-shadow: 0 1px 3px rgba(0,0,0,0.9); line-height: 1.4; }
        .footer-contact i { color: var(--gold); margin-top: 3px; font-size: 1.1rem; width: 20px; text-align: center; flex-shrink: 0;}
        
        .keep-together { white-space: nowrap; }
        .mobile-break { display: none; } 

        .footer-social-center { text-align: center; }
        .social-btn { display: inline-flex; justify-content: center; align-items: center; width: 50px; height: 50px; border-radius: 50%; border: 1px solid rgba(212, 175, 55, 0.4); color: #fff; font-size: 1.3rem; margin: 0 10px; transition: 0.3s; text-decoration: none; background: rgba(0,0,0,0.6); backdrop-filter: blur(5px);}
        .social-btn:hover { border-color: var(--gold); color: var(--gold); transform: translateY(-5px); box-shadow: 0 0 15px var(--gold-shadow); background: rgba(0,0,0,0.9);}
        
        .footer-dev-right { text-align: right; display: flex; flex-direction: column; align-items: flex-end; justify-content: center; }
        .dev-logo { width: 120px; filter: grayscale(100%) brightness(200%); opacity: 0.8; transition: 0.3s; cursor: pointer; }
        .dev-logo:hover { filter: grayscale(0%) brightness(100%); opacity: 1; }
        
        .copyright { position: relative; z-index: 1; font-size: 0.8rem; color: #ccc; padding-top: 20px; border-top: 1px solid rgba(212, 175, 55, 0.3); display: flex; justify-content: space-between; max-width: 1200px; margin: 0 auto; padding-left: 20px; padding-right: 20px; flex-wrap: wrap; text-shadow: 0 1px 2px #000; }

        /* --- LGPD COOKIE BANNER --- */
        .cookie-banner {
            position: fixed; bottom: -100px; left: 0; width: 100%;
            background: rgba(0, 12, 24, 0.98); border-top: 1px solid var(--gold);
            padding: 20px; z-index: 9999; display: flex; justify-content: center; align-items: center; gap: 20px;
            transition: bottom 0.5s ease-in-out; box-shadow: 0 -5px 20px rgba(0,0,0,0.5);
            font-family: 'Lato', sans-serif;
        }
        .cookie-banner.show { bottom: 0; }
        .cookie-text { font-size: 0.9rem; color: #ccc; max-width: 800px; text-align: center;}
        .cookie-btn { background: var(--gold); color: #000; border: none; padding: 10px 25px; font-weight: bold; cursor: pointer; border-radius: 4px; transition: 0.3s; text-transform: uppercase; font-size: 0.85rem;}
        .cookie-btn:hover { background: #fff; }


        /* --- EFEITO MATRIX --- */
        body.matrix-mode { background: #000 !important; color: #0f0 !important; font-family: monospace !important; animation: shake 0.5s infinite; }
        body.matrix-mode * { display: none !important; }
        body.matrix-mode::before { content: 'ACESSO NEGADO. VIOLAÇÃO DE SEGURANÇA DETECTADA. REDIRECIONANDO...'; display: flex !important; justify-content: center; align-items: center; position: fixed; top: 0; left: 0; width: 100%; height: 100vh; font-size: 2rem; color: #f00; text-align: center; padding: 20px; z-index: 9999; background: #000;}
        
        @keyframes popIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        @keyframes float { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-10px); } }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        @keyframes shimmer { 0% { left: -50%; top: -50%; } 100% { left: 150%; top: 150%; } }
        @keyframes shake { 0% { transform: translate(1px, 1px) rotate(0deg); } 10% { transform: translate(-1px, -2px) rotate(-1deg); } 20% { transform: translate(-3px, 0px) rotate(1deg); } 30% { transform: translate(3px, 2px) rotate(0deg); } 40% { transform: translate(1px, -1px) rotate(1deg); } 50% { transform: translate(-1px, 2px) rotate(-1deg); } 60% { transform: translate(-3px, 1px) rotate(0deg); } 70% { transform: translate(3px, 1px) rotate(-1deg); } 80% { transform: translate(-1px, -1px) rotate(1deg); } 90% { transform: translate(1px, 2px) rotate(0deg); } 100% { transform: translate(1px, -2px) rotate(-1deg); } }

        /* --- RESPONSIVIDADE MOBILE --- */
        @media (max-width: 768px) {
            .brasao-container { width: 120px; height: 120px; margin-bottom: 20px; } 
            .page-title { font-size: 1.5rem; margin-bottom: 5px; } 
            .page-title span { font-size: 1.1rem; }
            .subtitle { font-size: 0.75rem; letter-spacing: 2px; margin-bottom: 30px; }
            
            .header-nav-inner { gap: 10px; }
            .nav-link { font-size: 0.7rem; padding: 6px 12px; }

            .auth-box { width: 92%; padding: 30px 15px; }
            .auth-box h2 { font-size: 1.3rem; }
            .cand-name-auth { font-size: 0.85rem; }
            
            .auth-links { flex-direction: row; gap: 10px; } 
            .btn-voltar { padding: 10px 5px; font-size: 0.65rem; }
            
            .process-grid { grid-template-columns: 1fr; }
            .archive-btn { min-height: auto; padding: 20px;}
            .cand-name { font-size: 1rem; }
            
            .search-input { font-size: 0.9rem; padding-left: 45px; }
            .search-icon { left: 15px; font-size: 1.1rem; z-index: 5; }

            .footer-grid { grid-template-columns: 1fr; text-align: center; gap: 40px;}
            .mobile-center-col { display: flex; flex-direction: column; align-items: center; }
            .footer-contact { text-align: left; display: inline-block; width: fit-content; max-width: 100%;}
            .mobile-break { display: block; } 
            
            .footer-dev-right { align-items: center; }
            .copyright { flex-direction: column; gap: 10px; text-align: center; }
            
            .cookie-banner { flex-direction: column; padding: 15px; text-align: center;}
            .cookie-btn { width: 100%; padding: 12px;}

            body.matrix-mode::before { font-size: 1.2rem; }
            #main-content { margin-top: 80px; }
        }
    </style>
</head>
<body>

    <div id="password-overlay">
        <div class="auth-box">
            <i class="fas fa-lock"></i>
            <h2>Acesso Restrito</h2>
            <p class="cand-label" style="color: #bbb; letter-spacing: 1px;">ARQUIVO CENTRAL DE PROCESSOS</p>
            <p style="font-family: 'Lato'; color: #ccc; font-size: 0.85rem; margin-bottom: 20px; position: relative; z-index: 5;">Insira a Palavra de Passe para acessar a Secretaria.</p>
            
            <div id="error-msg" class="error-msg">Palavra Incorreta. Tentativas: <span id="tentativas">0</span>/3</div>
            
            <input type="password" id="passInput" class="auth-input" placeholder="••••••••" autocomplete="off">
            <button class="auth-btn" id="btn-login" onclick="checkPassword()">Desbloquear Arquivo</button>
            
            <div class="auth-links">
                <a href="../../index.html" class="btn-voltar"><i class="fas fa-home"></i> Início</a>
                <a href="../index.html" class="btn-voltar"><i class="fas fa-folder"></i> Secretaria</a>
            </div>
        </div>
    </div>

    <div id="main-content">
        
        <header id="dossie-header">
            <div class="header-nav-inner">
                <a href="../../index.html" class="nav-link"><i class="fas fa-home"></i> <span>Início</span></a>
                <a href="../index.html" class="nav-link"><i class="fas fa-folder"></i> <span>Secretaria</span></a>
            </div>
        </header>

        <canvas id="constellation-bg"></canvas>

        <div class="container">
            <div class="dossier-header">
                <div class="brasao-container">
                    <img src="../../imagens/264.webp" alt="Brasão 264" class="brasao-img" onerror="this.src='../../imagens/264.jpg'">
                </div>
                <h1 class="page-title">A∴ R∴ L∴ M∴<br>Fraternidade Imperial <span>Nº 264</span></h1>
                <p class="subtitle">Arquivo Histórico de Sindicâncias</p>
            </div>

            <div class="search-container">
                <i class="fas fa-search search-icon"></i>
                <input type="text" id="searchInput" class="search-input" placeholder="Pesquisar por Nome, Status ou CIM...">
            </div>
            
            <div class="process-grid" id="process-list">
                <div id="no-results-msg"><i class="fas fa-search-minus" style="font-size: 2rem; margin-bottom: 10px; display:block;"></i>Nenhum processo encontrado.</div>
                </div>
            
            <button id="loadMoreBtn" onclick="loadMore()" style="display:none;">Carregar Mais Arquivos</button>

        </div>

        <footer id="secretaria-footer">
            <div class="footer-grid">
                <div class="footer-col mobile-center-col">
                    <h4>Fale Conosco</h4>
                    <div class="footer-contact">
                        <p><i class="fas fa-map-pin"></i> <span>Rua Nair Tefé, 320 - Quitandinha, <br class="mobile-break"><span class="keep-together">Petrópolis - RJ</span></span></p>
                        <p><i class="fas fa-clock"></i> <span>Reuniões: Sábados (Quinzenalmente) às 10h</span></p>
                        <p><i class="fas fa-envelope"></i> <span>secretaria@fraternidadeimperial264.com.br</span></p>
                    </div>
                </div>
                <div class="footer-col footer-social-center">
                    <h4>Redes Sociais</h4>
                    <div class="social-icons">
                        <a href="https://www.instagram.com/fraternidadeimperial264" target="_blank" class="social-btn" title="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="social-btn" title="YouTube (Em breve)"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                <div class="footer-col footer-dev-right">
                    <span style="font-size:0.8rem; color:#aaa; margin-bottom:5px; text-shadow: 0 1px 2px #000;">Desenvolvido por:</span>
                    <a href="https://oimaginista.com" target="_blank">
                        <img src="../../imagens/logo.png" alt="O Imaginista" class="dev-logo" onerror="this.src='../../logo.png'">
                    </a>
                </div>
            </div>

            <div class="copyright">
                <span>© 2026 A∴ R∴ L∴ M∴ Fraternidade Imperial Nº 264. Todos os direitos reservados.</span>
                <span>CNPJ: 00.000.000/0000-00</span>
            </div>
        </footer>

    </div>

    <div id="cookie-banner" class="cookie-banner">
        <div class="cookie-text">
            Este site utiliza cookies para garantir a segurança e funcionalidade da Secretaria. 
            Ao continuar, você concorda com nossa <a href="#" style="color:var(--gold); text-decoration: underline;">Política de Privacidade</a>.
        </div>
        <button id="accept-cookies" class="cookie-btn">Entendido</button>
    </div>

    <script>
        // =========================================================
        // BASE DE DADOS: ARQUIVO CENTRAL (15 Nomes Fictícios para teste)
        // Configure o "status" e se deve "exibirCim" (true/false)
        // =========================================================
        const dadosProcessos = [
            {nome: "Ruan Pablo da Silva de Lima Santos", data: "28/03/2026", cim: "0245177", status: "Concluído", exibirCim: true},
            {nome: "Jefferson Alencar de Souza", data: "15/12/2025", cim: "0245178", status: "Concluído", exibirCim: true},
            {nome: "Marcos Vinícius Oliveira", data: "10/01/2026", cim: "ARQUIVADO", status: "Desistência", exibirCim: false},
            {nome: "Ricardo Ferreira da Costa", data: "05/11/2025", cim: "0245180", status: "Concluído", exibirCim: true},
            {nome: "Claudio Roberto Mendes", data: "20/09/2025", cim: "NEGADO", status: "Negado", exibirCim: false},
            {nome: "Fábio de Andrade Lima", data: "18/08/2025", cim: "0245182", status: "Concluído", exibirCim: true},
            {nome: "Sérgio Murilo Peixoto", data: "10/07/2025", cim: "0245183", status: "Concluído", exibirCim: true},
            {nome: "Gustavo Henrique Duarte", data: "02/06/2025", cim: "ARQUIVADO", status: "Desistência", exibirCim: false},
            {nome: "Thiago Braga de Matos", data: "15/05/2025", cim: "0245185", status: "Concluído", exibirCim: true},
            {nome: "André Luiz Guimarães", data: "30/04/2025", cim: "0245186", status: "Concluído", exibirCim: true},
            {nome: "Paulo Roberto de Souza", data: "22/03/2025", cim: "0245187", status: "Concluído", exibirCim: true},
            {nome: "Luciano Barbosa da Silva", data: "10/02/2025", cim: "NEGADO", status: "Negado", exibirCim: false},
            {nome: "Otávio Augusto Valente", data: "28/01/2025", cim: "0245189", status: "Concluído", exibirCim: true},
            {nome: "Rodrigo Antunes de Oliveira", data: "15/12/2024", cim: "0245190", status: "Concluído", exibirCim: true},
            {nome: "Fernando José de Almeida", data: "05/11/2024", cim: "0245191", status: "Concluído", exibirCim: true}
        ];

        let visibleCount = 6; 
        const listContainer = document.getElementById('process-list');
        const loadBtn = document.getElementById('loadMoreBtn');
        const noResultsMsg = document.getElementById('no-results-msg');

        // --- FUNÇÃO PARA RENDERIZAR A LISTA EM CARDS TRIPLOS ---
        function renderList() {
            const cards = listContainer.querySelectorAll('.js-process-card');
            cards.forEach(card => card.remove());
            
            dadosProcessos.forEach((p, index) => {
                const isConcluido = p.status === "Concluído";
                const card = document.createElement('a');
                
                const pastaLink = isConcluido ? `../processos/${p.cim}/` : `#`; 
                
                card.href = pastaLink;
                card.className = "archive-btn js-process-card";
                card.style.display = index < visibleCount ? "flex" : "none";
                
                const cimLabelClass = p.exibirCim ? "cim-label" : "cim-label negado";
                const cimNumClass = p.exibirCim ? "cim-num" : "cim-num negado";
                const cimBoxClass = p.exibirCim ? "cim-box" : "cim-box negado";
                const iconClass = isConcluido ? "fas fa-calendar-check" : "fas fa-calendar-times";
                const borderStyle = isConcluido ? "" : "border-color: rgba(204, 0, 0, 0.3);";
                const tagClass = isConcluido ? "status-badge st-success" : "status-badge st-denied";
                const dateLabel = isConcluido ? "Iniciado em:" : "Encerrado em:";
                const labelCIMTexto = p.exibirCim ? "CIM" : "PROCESSO";
                const lockIcon = isConcluido ? "" : `<i class="fas fa-lock" style="color:#cc0000;"></i>`;

                card.style.cssText += borderStyle;

                card.innerHTML = `
                    <div class="cand-info">
                        <div class="card-header-row">
                            <div class="${cimBoxClass}">
                                <span class="${cimLabelClass}">${labelCIMTexto}</span>
                                <span class="${cimNumClass}">${p.cim}</span>
                            </div>
                            ${lockIcon}
                        </div>
                        
                        <span class="cand-name">${p.nome}</span>
                        <div class="${tagClass}">Processo ${p.status}</div>
                        <span class="date-info"><i class="${iconClass}"></i> ${dateLabel} ${p.data}</span>
                    </div>
                    <i class="fas fa-arrow-right arrow-bottom" style="${isConcluido ? '' : 'display:none;'}"></i>
                `;
                listContainer.appendChild(card);
            });

            loadBtn.style.display = visibleCount >= dadosProcessos.length ? "none" : "inline-block";
        }

        // --- FUNÇÃO CARREGAR MAIS ---
        function loadMore() {
            visibleCount += 9; 
            renderList();
        }

        // --- LÓGICA DE LOGIN DESACOMPLADA E BLINDADA ---
        document.addEventListener('DOMContentLoaded', () => {
            const btnLogin = document.getElementById('btn-login');
            const passInput = document.getElementById('passInput');
            const searchInput = document.getElementById('searchInput');
            
            /* Lógica Cookies */
            const banner = document.getElementById('cookie-banner');
            const acceptBtn = document.getElementById('accept-cookies');
            if (!localStorage.getItem('cookiesAccepted_264')) {
                setTimeout(() => banner.classList.add('show'), 2000); 
            }
            acceptBtn.addEventListener('click', () => {
                localStorage.setItem('cookiesAccepted_264', 'true');
                banner.classList.remove('show');
            });


            let tentativas = 0;
            const maxTentativas = 3;

            function checkPassword() {
                const pass = passInput.value.trim();
                const correctPass = "imperial"; 
                
                if(pass === correctPass) {
                    const overlay = document.getElementById('password-overlay');
                    const main = document.getElementById('main-content');
                    const header = document.getElementById('dossie-header');
                    const footer = document.getElementById('secretaria-footer');
                    
                    overlay.style.opacity = '0';
                    
                    setTimeout(() => {
                        overlay.style.display = 'none';
                        main.style.display = 'flex'; 
                        footer.style.display = 'block';
                        
                        // Força redesenho do DOM
                        void main.offsetWidth; 
                        
                        main.classList.add('visible');
                        
                        // Garante que o header fique no topo e clicável
                        header.style.display = 'flex';
                        setTimeout(() => {
                            header.classList.add('visible');
                        }, 100);
                        
                        renderList(); 
                        initConstellations(); 
                    }, 500);
                } else {
                    let tentativasSpan = document.getElementById('tentativas');
                    tentativas++;
                    tentativasSpan.innerText = tentativas;
                    document.getElementById('error-msg').style.display = 'block';
                    passInput.value = '';
                    passInput.focus();
                    
                    if (tentativas >= maxTentativas) {
                        document.body.className = 'matrix-mode';
                        passInput.disabled = true;
                        btnLogin.disabled = true;
                        setTimeout(() => { window.location.href = "../../index.html"; }, 3000);
                    }
                }
            }

            if(btnLogin) btnLogin.addEventListener('click', checkPassword);
            if(passInput) {
                passInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') checkPassword();
                });
            }

            // Lógica do Buscador
            if(searchInput) {
                searchInput.addEventListener('keyup', () => {
                    let input = searchInput.value.toLowerCase();
                    let cards = document.getElementsByClassName('js-process-card');
                    let hasVisibleCard = false;

                    if(input === "") {
                        renderList(); 
                        noResultsMsg.style.display = "none";
                        return;
                    }

                    loadBtn.style.display = "none";

                    for (let i = 0; i < cards.length; i++) {
                        let name = cards[i].querySelector('.cand-name').innerText.toLowerCase();
                        let cim = cards[i].querySelector('.cim-num').innerText.toLowerCase();
                        let status = cards[i].querySelector('.status-badge').innerText.toLowerCase();
                        
                        if (name.includes(input) || cim.includes(input) || status.includes(input)) {
                            cards[i].style.display = "flex";
                            hasVisibleCard = true;
                        } else {
                            cards[i].style.display = "none";
                        }
                    }

                    noResultsMsg.style.display = hasVisibleCard ? "none" : "block";
                });
            }
        });

        /* --- CONSTELAÇÕES OTIMIZADAS PARA NÃO BLOQUEAR CLIQUES --- */
        function initConstellations() {
            const canvas = document.getElementById('constellation-bg');
            if(!canvas) return;
            const ctx = canvas.getContext('2d');
            let w, h, particles = [];
            
            const isMobile = window.innerWidth < 768;

            const properties = {
                particleColor: 'rgba(212, 175, 55, 1)', 
                particleRadius: 2, 
                particleCount: isMobile ? 35 : 70, 
                lineLength: isMobile ? 100 : 150, 
                particleSpeed: 0.5 
            };

            const resize = () => { w = canvas.width = window.innerWidth; h = canvas.height = window.innerHeight; };
            window.addEventListener('resize', resize);
            resize();

            class Particle {
                constructor(){
                    this.x = Math.random() * w;
                    this.y = Math.random() * h;
                    this.vx = (Math.random() - 0.5) * properties.particleSpeed;
                    this.vy = (Math.random() - 0.5) * properties.particleSpeed;
                }
                position(){
                    if(this.x > w || this.x < 0) this.vx *= -1;
                    if(this.y > h || this.y < 0) this.vy *= -1;
                    this.x += this.vx;
                    this.y += this.vy;
                }
                draw(){
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, properties.particleRadius, 0, Math.PI * 2);
                    ctx.fillStyle = properties.particleColor;
                    ctx.fill();
                }
            }

            for(let i=0; i < properties.particleCount; i++){
                particles.push(new Particle());
            }

            function loop(){
                ctx.clearRect(0, 0, w, h);
                for(let i=0; i < particles.length; i++){
                    particles[i].position();
                    particles[i].draw();
                    for(let j = i + 1; j < particles.length; j++){
                        const dist = Math.hypot(particles[i].x - particles[j].x, particles[i].y - particles[j].y);
                        if(dist < properties.lineLength){
                            ctx.lineWidth = 0.5;
                            ctx.strokeStyle = `rgba(212, 175, 55, ${1 - dist/properties.lineLength})`; 
                            ctx.beginPath();
                            ctx.moveTo(particles[i].x, particles[i].y);
                            ctx.lineTo(particles[j].x, particles[j].y);
                            ctx.stroke();
                        }
                    }
                }
                requestAnimationFrame(loop);
            }
            loop();
        }
    </script>
</body>
</html>