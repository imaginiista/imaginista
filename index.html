<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Imaginista — Em Breve</title>

  	<link rel="icon" type="image/png" href="/favicon/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/svg+xml" href="/favicon/favicon.svg">
    <link rel="shortcut icon" href="/favicon/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
    <meta name="apple-mobile-web-app-title" content="Imaginista">
    <link rel="manifest" href="/favicon/site.webmanifest">
    <meta name="theme-color" content="#ffffff">

<!-- GSAP e TSParticles -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/tsparticles@2/tsparticles.bundle.min.js"></script>

<style>
  :root {
    --bg: #000;
    --glass: rgba(255,255,255,0.08);
  }
  * { box-sizing: border-box; }
  html, body {
    height: 100%;
    margin: 0;
    background: var(--bg);
    color: #fff;
    font-family: "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, Arial;
  }
  body {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    overflow-x: hidden;
  }

  /* --- NEW: background media (gif/video/animated gradient) --- */
  #bgMedia {
    position: fixed;
    inset: 0;
    z-index: -4; /* behind tsparticles (-3) and canvas (-2) */
    pointer-events: none;
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    opacity: 0.28; /* tweak to taste */
    filter: saturate(0.95) contrast(0.9) brightness(0.95);
    transition: opacity 0.4s ease;
  }

  /* subtle animated gradient (fallback/overlay if you prefer not to use a gif) */
  @keyframes subtleShift { from { transform: scale(1) translateY(0);} to { transform: scale(1.02) translateY(-6px);} }
  #bgMedia::after{
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(120deg, rgba(40,40,55,0.06), rgba(0,0,0,0.25));
    mix-blend-mode: overlay;
    animation: subtleShift 8s ease-in-out infinite alternate;
  }

  .wrap {
    width: 100%;
    max-width: 980px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
    text-align: center;
    position: relative;
    z-index: 1;
  }

  #tsparticles-bg {
    position: fixed;
    inset: 0;
    z-index: -3;
    pointer-events: none;
  }

  #bgCanvas {
    position: fixed;
    inset: 0;
    z-index: -2;
    pointer-events: none;
    display: block;
  }

  .overlay {
    position: fixed;
    inset: 0;
    z-index: -1;
    background:
      radial-gradient(circle at 12% 14%, rgba(120,160,255,0.03), transparent 6%),
      radial-gradient(circle at 86% 84%, rgba(200,140,255,0.02), transparent 10%),
      linear-gradient(180deg, rgba(0,8,20,0.12), rgba(0,0,0,0.45));
    pointer-events: none;
  }

  #logo {
    width: 480px;
    max-width: 72vw;
    cursor: pointer;
    -webkit-user-drag: none;
    user-select: none;
    transition: filter .25s, transform .25s;
    will-change: transform, opacity;
    display: block;
  }
  #logo:hover {
    filter: drop-shadow(0 10px 28px rgba(143,209,255,0.12));
    transform: translateY(-3px) scale(1.02);
  }

  #soon {
    font-size: clamp(26px, 4.2vw, 34px);
    font-weight: 700;
    margin: 0;
    cursor: pointer;
  }

  #desc {
    font-size: clamp(15px, 2.2vw, 18px);
    opacity: .96;
    max-width: 720px;
    margin: 0;
    cursor: pointer;
    line-height: 1.45;
  }

  #characters {
    width: 250px;
    max-width: 78vw;
    cursor: pointer;
    display: block;
    margin-top: 6px;
  }

  .countdown {
    display: flex;
    gap: 10px;
    margin-top: 12px;
    justify-content: center;
    flex-wrap: wrap;
  }

  .cd-box {
    background: var(--glass);
    padding: 12px 14px;
    border-radius: 10px;
    min-width: 64px;
    border: 1px solid rgba(255,255,255,0.08);
    text-align: center;
  }
  .cd-num {
    font-weight: 700;
    font-size: 1.1rem;
  }
  .cd-label {
    font-size: .65rem;
    opacity: .75;
    margin-top: 6px;
    text-transform: uppercase;
    letter-spacing: .6px;
  }

  #fragLayer {
    position: fixed;
    inset: 0;
    z-index: 9999;
    pointer-events: none;
  }

  @media (max-width:600px) {
    #logo { width: 68vw; }
    #characters { width: 70vw; }
    #soon { font-size: 22px; }
    .cd-box { min-width: 52px; padding: 8px 10px; }
  }
</style>
</head>
<body>
  <!-- NEW: place your gif/video path here. Examples:
       background-image: url('assets/bg.gif');
       or for a video use a <video> element with autoplay loop muted playsinline inside this div.
  -->
  <div id="bgMedia" style="background-image: url('bg.gif');"></div>

  <div id="tsparticles-bg"></div>
  <canvas id="bgCanvas" aria-hidden="true"></canvas>
  <div class="overlay" aria-hidden="true"></div>
  <div id="fragLayer" aria-hidden="true"></div>

  <main class="wrap">
    <img id="logo" src="logo.png" alt="Logo O Imaginista">
    <h1 id="soon">Em breve...</h1>
    <p id="desc">
      Nossos construtores estão trabalhando duro para transformar essa ideia em realidade.<br>
      <strong>Voltamos logo!</strong>
    </p>
    <img id="characters" src="personagens.png" alt="Personagens">
    <div class="countdown">
      <div class="cd-box"><div id="cd-days" class="cd-num">00</div><div class="cd-label">Dias</div></div>
      <div class="cd-box"><div id="cd-hours" class="cd-num">00</div><div class="cd-label">Horas</div></div>
      <div class="cd-box"><div id="cd-min" class="cd-num">00</div><div class="cd-label">Min</div></div>
      <div class="cd-box"><div id="cd-sec" class="cd-num">00</div><div class="cd-label">Seg</div></div>
    </div>
  </main>

<!-- Canvas de bolinhas GSAP -->
<canvas id="gsapBolas"></canvas>

<script>
// === EFEITO GSAP: Bolinhas brancas de fundo ===
const canvasBolas = document.getElementById("gsapBolas");
const ctxBolas = canvasBolas.getContext("2d");

function resizeCanvasBolas() {
  canvasBolas.width = window.innerWidth;
  canvasBolas.height = window.innerHeight;
}
window.addEventListener("resize", resizeCanvasBolas);
resizeCanvasBolas();

// Cria as bolinhas
const numBolas = 1000;
const bolas = [];

for (let i = 0; i < numBolas; i++) {
  bolas.push({
    x: Math.random() * canvasBolas.width,
    y: Math.random() * canvasBolas.height,
    r: 1.5 + Math.random() * 2.5,
    alpha: 0.25 + Math.random() * 0.55,
  });
}

// Anima cada bolinha com GSAP
bolas.forEach((bola) => {
  gsap.to(bola, {
    duration: 5 + Math.random() * 6,
    x: `+=${-60 + Math.random() * 120}`,
    y: `+=${-60 + Math.random() * 120}`,
    repeat: -1,
    yoyo: true,
    ease: "sine.inOut",
  });
});

// Renderiza as bolinhas com brilho sutil
function drawBolas() {
  ctxBolas.clearRect(0, 0, canvasBolas.width, canvasBolas.height);
  bolas.forEach((bola) => {
    const grad = ctxBolas.createRadialGradient(
      bola.x, bola.y, 0,
      bola.x, bola.y, bola.r * 1
    );
    grad.addColorStop(0, `rgba(255,255,255,${bola.alpha})`);
    grad.addColorStop(1, "rgba(255,255,255,0)");
    ctxBolas.fillStyle = grad;
    ctxBolas.beginPath();
    ctxBolas.arc(bola.x, bola.y, bola.r * 3, 0, Math.PI * 2);
    ctxBolas.fill();
  });
  requestAnimationFrame(drawBolas);
}
drawBolas();

// Posicionamento e camadas — coloca acima do bgMedia e atrás das partículas
canvasBolas.style.position = "fixed";
canvasBolas.style.top = 0;
canvasBolas.style.left = 0;
canvasBolas.style.width = "100%";
canvasBolas.style.height = "100%";
canvasBolas.style.zIndex = "-2.5"; // entre o bgCanvas (-2) e tsparticles (-3)
canvasBolas.style.pointerEvents = "none";
canvasBolas.style.filter = "blur(1px) brightness(1.4)";
</script>


<script>
/* ====================== BACKGROUND: STARFIELD + FLOATERS + PARTICLE NETWORK ====================== */
const bgCanvas = document.getElementById('bgCanvas');
// safe-get context (in case of older browsers or if element missing)
const bgCtx = (bgCanvas && bgCanvas.getContext) ? bgCanvas.getContext('2d') : null;

let DPR = Math.min(window.devicePixelRatio || 1, 2);
function resizeBg(){
  DPR = Math.min(window.devicePixelRatio || 1, 2);
  if(!bgCanvas) return;
  bgCanvas.width = Math.round(innerWidth * DPR);
  bgCanvas.height = Math.round(innerHeight * DPR);
  bgCanvas.style.width = innerWidth + 'px';
  bgCanvas.style.height = innerHeight + 'px';
  if(bgCtx && bgCtx.setTransform) bgCtx.setTransform(DPR,0,0,DPR,0,0);
}
resizeBg();

/* We'll re-init some collections on resize. */
window.addEventListener('resize', () => {
  resizeBg();
  initStarLayers();
  initFloaters();
  initGlowParticles();
  initParticleNetwork();
  initDustParticles(); // re-init integrated dust
  initTwinkles(); // re-init twinkles
});

/* ------------------- STARFIELD ------------------- */
const layers = [];
function initStarLayers(){
  layers.length = 0;
  const area = innerWidth * innerHeight;
  const base = Math.max(120, Math.round(area / 3000));
  const counts = [Math.round(base*0.45), Math.round(base*0.35), Math.round(base*0.20)];
  const depths = [0.9,0.6,0.25];
  for(let i=0;i<3;i++){
    const arr=[];
    for(let j=0;j<counts[i];j++){
      arr.push({
        x: Math.random()*innerWidth,
        y: Math.random()*innerHeight,
        r: Math.random()*(i===0?1.8:(i===1?1.1:0.7)) + (i===0?0.8:0.3),
        vx: (Math.random()-0.5)*(0.1 + depths[i]*0.6),
        vy: (0.2 + Math.random()*0.6)*(0.2+depths[i]*0.7),
        alpha:0.5+Math.random()*0.7,
        tw: Math.random()*360,
        depth:depths[i]
      });
    }
    layers.push({stars:arr, depth:depths[i], speedMult:0.6+depths[i]});
  }
}
initStarLayers();

/* Mouse parallax */
const pointer = {x: innerWidth/2, y: innerHeight/2};
window.addEventListener('mousemove', e => { pointer.x = e.clientX; pointer.y = e.clientY; });

/* ------------------- FLOATERS ------------------- */
const floaters = [];
function initFloaters() {
  floaters.length=0;
  const floaterCount = Math.round((innerWidth*innerHeight)/45000);
  for(let i=0;i<floaterCount;i++){
    floaters.push({
      x: Math.random()*innerWidth,
      y: Math.random()*innerHeight,
      r: 2.2 + Math.random()*3.8,
      vy:0.08+Math.random()*0.15,
      vx:(Math.random()-0.5)*0.05,
      alpha:0.25+Math.random()*0.3,
      tw:Math.random()*360
    });
  }
}
initFloaters();

/* ------------------- GLOW PARTICLES ------------------- */
const glowParticles = [];
function initGlowParticles(){
  glowParticles.length=0;
  const w = innerWidth;
  const h = innerHeight;
  const glowCount = Math.floor((w*h)/25000);
  for(let i=0;i<glowCount;i++){
    glowParticles.push({
      x: Math.random()*w,
      y: Math.random()*h,
      size:1.2+Math.random()*2.8,
      speedX:(Math.random()-0.5)*0.4,
      speedY:(Math.random()-0.5)*0.4,
      pulse: Math.random()*0.8+0.4
    });
  }
}
initGlowParticles();

/* ------------------- PARTICLE NETWORK ------------------- */
const particleNetwork = [];
const PN_COUNT = Math.round((innerWidth*innerHeight)/8000);
const PN_MAX_DIST = 120;

function initParticleNetwork(){
    particleNetwork.length = 0;
    for(let i=0;i<PN_COUNT;i++){
        particleNetwork.push({
            x: Math.random()*innerWidth,
            y: Math.random()*innerHeight,
            vx: (Math.random()-0.5)*0.4,
            vy: (Math.random()-0.5)*0.4,
            r: 1.4 + Math.random()*1.6,
            alpha: 0.3 + Math.random()*0.5
        });
    }
}
initParticleNetwork();

function drawParticleNetwork(){
    for(const p of particleNetwork){
        p.x += p.vx;
        p.y += p.vy;
        if(p.x<0) p.x=innerWidth;
        if(p.x>innerWidth) p.x=0;
        if(p.y<0) p.y=innerHeight;
        if(p.y>innerHeight) p.y=0;
    }
    for(let i=0;i<particleNetwork.length;i++){
        const p1 = particleNetwork[i];
        for(let j=i+1;j<particleNetwork.length;j++){
            const p2 = particleNetwork[j];
            const dx = p1.x-p2.x;
            const dy = p1.y-p2.y;
            const dist = Math.sqrt(dx*dx+dy*dy);
            if(dist < PN_MAX_DIST){
                const alpha = (1 - dist/PN_MAX_DIST) * 0.15;
                if(bgCtx) bgCtx.strokeStyle = `rgba(180,220,255,${alpha})`;
                if(bgCtx) bgCtx.lineWidth = 1;
                if(bgCtx){
                  bgCtx.beginPath();
                  bgCtx.moveTo(p1.x,p1.y);
                  bgCtx.lineTo(p2.x,p2.y);
                  bgCtx.stroke();
                }
            }
        }
    }
    for(const p of particleNetwork){
        if(bgCtx) bgCtx.fillStyle = `rgba(180,220,255,${p.alpha})`;
        if(bgCtx){
          bgCtx.beginPath();
          bgCtx.arc(p.x,p.y,p.r,0,Math.PI*2);
          bgCtx.fill();
        }
    }
}

/* ====================== INTEGRATED DUST PARTICLES (NO EXTRA CANVAS) ====================== */
const dustParticles = [];
function initDustParticles(){
  dustParticles.length = 0;
  const count = Math.max(12, Math.round((innerWidth * innerHeight) / 50000));
  for(let i=0;i<count;i++){
    dustParticles.push({
      x: Math.random()*innerWidth,
      y: Math.random()*innerHeight,
      r: Math.random()*1.2 + 0.4,
      vx: (Math.random()-0.5)*0.12,
      vy: (Math.random()-0.5)*0.12,
      a: 0.08 + Math.random()*0.18,
      phase: Math.random()*Math.PI*2,
      pulse: Math.random()*0.018 + 0.006
    });
  }
}
initDustParticles();

/* ====================== TWINKLES (bolinhas piscando e andando) ====================== */
let twinkles = [];
function initTwinkles(){
  twinkles.length = 0;
  const count = Math.max(6, Math.round((innerWidth * innerHeight) / 90000));
  for(let i=0;i<count;i++){
    twinkles.push({
      x: Math.random()*innerWidth,
      y: Math.random()*innerHeight,
      r: 1.4 + Math.random()*2.0,
      vx: (Math.random()-0.5)*0.15,
      vy: (Math.random()-0.5)*0.15,
      phase: Math.random()*Math.PI*2,
      speed: 0.02 + Math.random()*0.02
    });
  }
}
initTwinkles();

/* ------------------- DRAW BACKGROUND ------------------- */
let lastTime = 0;
function drawBackground(t){
  // guard if no canvas/context
  if(!bgCanvas || !bgCtx) return;
  const dt = Math.min((t-lastTime)/1000,0.05);
  lastTime = t;

  // deixa o rastro mais suave (menos escurecimento)
  bgCtx.fillStyle='rgba(0,0,0,0.10)';
  bgCtx.fillRect(0,0,innerWidth,innerHeight);

  const cx = pointer.x - innerWidth/2;
  const cy = pointer.y - innerHeight/2;

  for(const layer of layers){
    for(const s of layer.stars){
      s.x += s.vx*(1+layer.depth)*dt*60;
      s.y += s.vy*(1+layer.depth)*dt*60;
      const parX = cx*(layer.depth*0.0025);
      const parY = cy*(layer.depth*0.0025);
      if(s.x < -10) s.x=innerWidth+10;
      if(s.x > innerWidth+10) s.x=-10;
      if(s.y < -10) s.y=innerHeight+10;
      if(s.y > innerHeight+10) s.y=-10;
      s.tw += 0.04+Math.random()*0.02;
      const alpha = Math.max(0.15,Math.min(1,s.alpha*(0.6+0.4*Math.abs(Math.sin(s.tw)))));
      if(layer.depth>0.7){
        const grad = bgCtx.createRadialGradient(s.x+parX,s.y+parY,0,s.x+parX,s.y+parY,Math.max(6,s.r*6));
        grad.addColorStop(0,`rgba(255,255,255,${alpha})`);
        grad.addColorStop(0.4,`rgba(200,220,255,${alpha*0.12})`);
        grad.addColorStop(1,'rgba(0,0,0,0)');
        bgCtx.fillStyle=grad;
        bgCtx.beginPath();
        bgCtx.arc(s.x+parX,s.y+parY,Math.max(1,s.r*6),0,Math.PI*2);
        bgCtx.fill();
      } else {
        bgCtx.fillStyle=`rgba(255,255,255,${alpha})`;
        bgCtx.fillRect(Math.round(s.x+parX),Math.round(s.y+parY),Math.max(1,s.r),Math.max(1,s.r));
      }
    }
  }

  /* Floaters */
  for(const f of floaters){
    f.y+=f.vy; f.x+=f.vx; f.tw+=0.01;
    if(f.y>innerHeight+12) { f.y=-12; f.x=Math.random()*innerWidth; }
    if(f.x<-12) f.x=innerWidth+12;
    if(f.x>innerWidth+12) f.x=-12;
    const pulse = 0.7+0.3*Math.sin(f.tw);
    const alpha = f.alpha*pulse;
    const grad = bgCtx.createRadialGradient(f.x,f.y,0,f.x,f.y,f.r*4);
    grad.addColorStop(0,`rgba(255,255,255,${alpha})`);
    grad.addColorStop(1,`rgba(255,255,255,0)`);
    bgCtx.fillStyle=grad;
    bgCtx.beginPath();
    bgCtx.arc(f.x,f.y,f.r*4,0,Math.PI*2);
    bgCtx.fill();
  }

  /* Glow particles */
  for(const p of glowParticles){
    p.x+=p.speedX; p.y+=p.speedY;
    if(p.x<0)p.x=innerWidth;
    if(p.x>innerWidth)p.x=0;
    if(p.y<0)p.y=innerHeight;
    if(p.y>innerHeight)p.y=0;
    const pulse = (Math.sin(Date.now()*0.002)*0.5+0.5)*p.pulse;
    const alpha = 0.3 + pulse*0.7;
    const grad = bgCtx.createRadialGradient(p.x,p.y,0,p.x,p.y,p.size+pulse*2);
    grad.addColorStop(0,`rgba(255,255,255,${alpha})`);
    grad.addColorStop(1,'rgba(255,255,255,0)');
    bgCtx.fillStyle=grad;
    bgCtx.beginPath();
    bgCtx.arc(p.x,p.y,p.size+pulse*2,0,Math.PI*2);
    bgCtx.fill();
  }

  /* Particle network */
  drawParticleNetwork();

  /* Dust particles */
  for(const d of dustParticles){
    d.x += d.vx;
    d.y += d.vy;
    d.phase += d.pulse;
    if(d.x < -6) d.x = innerWidth + 6;
    if(d.x > innerWidth + 6) d.x = -6;
    if(d.y < -6) d.y = innerHeight + 6;
    if(d.y > innerHeight + 6) d.y = -6;
    const a = d.a * (0.5 + 0.5 * Math.sin(d.phase));
    const grd = bgCtx.createRadialGradient(d.x, d.y, 0, d.x, d.y, Math.max(6, d.r*6));
    grd.addColorStop(0, `rgba(255,255,255,${a})`);
    grd.addColorStop(1, `rgba(255,255,255,0)`);
    bgCtx.fillStyle = grd;
    bgCtx.beginPath();
    bgCtx.arc(d.x, d.y, Math.max(6, d.r*6), 0, Math.PI*2);
    bgCtx.fill();
  }

  /* TWINKLES (bolhas piscando) */
  for(const t of twinkles){
    t.x += t.vx;
    t.y += t.vy;
    t.phase += t.speed;
    if(t.x < -8) t.x = innerWidth + 8;
    if(t.x > innerWidth + 8) t.x = -8;
    if(t.y < -8) t.y = innerHeight + 8;
    if(t.y > innerHeight + 8) t.y = -8;
    const alpha = 0.6 + 0.4 * Math.sin(t.phase);
    const rad = Math.max(1, t.r);
    const g = bgCtx.createRadialGradient(t.x, t.y, 0, t.x, t.y, rad*5);
    g.addColorStop(0, `rgba(255,255,255,${alpha})`);
    g.addColorStop(1, 'rgba(255,255,255,0)');
    bgCtx.fillStyle = g;
    bgCtx.beginPath();
    bgCtx.arc(t.x, t.y, rad*5, 0, Math.PI*2);
    bgCtx.fill();
  }

  requestAnimationFrame(drawBackground);
}


/* ================== Countdown ================== */
const target = new Date("2026-02-03T00:00:00").getTime();
function updateCountdown(){
  const now = Date.now();
  let diff = target-now;
  if(diff<0) diff=0;
  const days = Math.floor(diff/(1000*60*60*24));
  const hours = Math.floor((diff%(1000*60*60*24))/(1000*60*60));
  const mins = Math.floor((diff%(1000*60*60))/(1000*60));
  const secs = Math.floor((diff%(1000*60))/1000);
  document.getElementById('cd-days').textContent=String(days).padStart(2,'0');
  document.getElementById('cd-hours').textContent=String(hours).padStart(2,'0');
  document.getElementById('cd-min').textContent=String(mins).padStart(2,'0');
  document.getElementById('cd-sec').textContent=String(secs).padStart(2,'0');
}
updateCountdown();
setInterval(updateCountdown,1000);

/* ================== Logo & Characters Animations (mantidos) ================== */
/* Mantive exatamente como você tinha, sem alteração */
const logo = document.getElementById('logo');
const fragLayer = document.getElementById('fragLayer');
async function createFragmentsAndAnimate(){
  if(logo.dataset.busy==="1") return;
  logo.dataset.busy="1";
  if(!logo.complete) await new Promise(r=>logo.onload=r);
  const rect = logo.getBoundingClientRect();
  const cols=12, rows=8;
  const fragW=Math.ceil(rect.width/cols);
  const fragH=Math.ceil(rect.height/rows);
  const img = new Image(); img.src=logo.src;
  try{ await img.decode();}catch(e){}
  const scaleX = img.naturalWidth/rect.width;
  const scaleY = img.naturalHeight/rect.height;
  const fragments=[];
  for(let y=0;y<rows;y++){
    for(let x=0;x<cols;x++){
      const sx=Math.floor(x*fragW*scaleX);
      const sy=Math.floor(y*fragH*scaleY);
      const sw=Math.ceil(fragW*scaleX);
      const sh=Math.ceil(fragH*scaleY);
      const piece=document.createElement('canvas');
      piece.width=sw; piece.height=sh;
      const pc=piece.getContext('2d');
      pc.drawImage(img,sx,sy,sw,sh,0,0,sw,sh);
      const left=rect.left+x*fragW;
      const top=rect.top+y*fragH;
      piece.style.position='fixed';
      piece.style.left=left+'px';
      piece.style.top=top+'px';
      piece.style.width=fragW+'px';
      piece.style.height=fragH+'px';
      piece.style.pointerEvents='none';
      piece.style.zIndex=9999;
      piece.style.transformOrigin='center center';
      fragLayer.appendChild(piece);
      fragments.push({el:piece,ox:left,oy:top});
    }
  }
  gsap.set(logo,{opacity:0.04,scale:0.98});
  const tl = gsap.timeline();
  fragments.forEach(f=>{
    const angle=Math.random()*Math.PI*2;
    const dist=80+Math.random()*260;
    const tx=Math.cos(angle)*dist;
    const ty=Math.sin(angle)*dist-(10+Math.random()*40);
    const rot=(Math.random()-0.5)*720;
    const dur=0.8+Math.random()*0.7;
    tl.to(f.el,{x:tx,y:ty,rotation:rot,opacity:0,ease:"power3.out",duration:dur},0);
  });
  const dustCount = Math.round((rect.width*rect.height)/4000);
  for(let i=0;i<dustCount;i++){
    const d=document.createElement('div');
    const size=Math.random()*3+0.8;
    d.style.position='fixed';
    d.style.width=d.style.height=size+'px';
    d.style.left=rect.left+rect.width/2+'px';
    d.style.top=rect.top+rect.height/2+'px';
    d.style.borderRadius='50%';
    d.style.background='rgba(255,255,255,0.95)';
    d.style.pointerEvents='none';
    d.style.zIndex=9998;
    fragLayer.appendChild(d);
    gsap.to(d,{
      x:(Math.random()-0.5)*(150+Math.random()*300),
      y:(Math.random()-0.5)*(150+Math.random()*300),
      opacity:0,
      scale:Math.random()*1.6+0.3,
      duration:0.9+Math.random()*0.9,
      ease:"power3.out",
      onComplete:()=>d.remove()
    });
  }
  await new Promise(r=>setTimeout(r,900));
  fragments.forEach(f=>{
    gsap.set(f.el,{opacity:0});
    gsap.fromTo(f.el,{x:(Math.random()-0.5)*200,y:(Math.random()-0.5)*200,rotation:(Math.random()-0.5)*360,opacity:0},{x:0,y:0,rotation:0,opacity:1,duration:0.9+Math.random()*0.6,ease:"power2.out"});
  });
  const cleanupDelay=1100;
  setTimeout(()=>{
    fragments.forEach(f=>gsap.to(f.el,{opacity:0,duration:0.35,ease:"power1.out"}));
    gsap.to(logo,{opacity:1,scale:1.02,duration:0.35,ease:"back.out(1.4)",onComplete:()=>{
      gsap.to(logo,{scale:1,duration:0.25,ease:"power1.out"});
      setTimeout(()=>{fragments.forEach(f=>{try{f.el.remove();}catch(e){} }); logo.dataset.busy="0";},380);
    }});
  },cleanupDelay);
}
logo.addEventListener('click',createFragmentsAndAnimate);

const characters=document.getElementById('characters');
characters.addEventListener('click',async ()=>{
  if(characters.dataset.busy==="1") return;
  characters.dataset.busy="1";
  await gsap.to(characters,{opacity:0,scale:0.86,duration:1.1,ease:"power2.in"});
  const rect=characters.getBoundingClientRect();
  const cx=rect.left+rect.width/2;
  const cy=rect.top+rect.height/2;
  for(let i=0;i<60;i++){
    const d=document.createElement('div');
    const s=Math.random()*3+0.6;
    d.style.position='fixed';
    d.style.left=cx+'px';
    d.style.top=cy+'px';
    d.style.width=d.style.height=s+'px';
    d.style.borderRadius='50%';
    d.style.background='rgba(255,255,255,0.95)';
    d.style.pointerEvents='none';
    d.style.zIndex=9997;
    fragLayer.appendChild(d);
    gsap.to(d,{
      x:(Math.random()-0.5)*320,
      y:(Math.random()-0.5)*320,
      opacity:0,
      scale:Math.random()*1.6+0.2,
      duration:1.1+Math.random()*0.9,
      ease:"power3.out",
      onComplete:()=>d.remove()
    });
  }
  await new Promise(r=>setTimeout(r,900));
  await gsap.fromTo(characters,{opacity:0,scale:0.9},{opacity:1,scale:1,duration:1.6,ease:"elastic.out(1,0.6)"});
  characters.dataset.busy="0";
});

const soon=document.getElementById('soon');
soon.addEventListener('click',()=>{ gsap.fromTo(soon,{skewX:0,scale:1},{skewX:10,scale:1.06,duration:0.16,yoyo:true,repeat:1,ease:"power1.inOut"}); });
const desc=document.getElementById('desc');
desc.addEventListener('click',async ()=>{
  if(desc.dataset.busy==="1") return;
  desc.dataset.busy="1";
  await gsap.to(desc,{opacity:0,duration:0.9,ease:"power2.in"});
  const rect=desc.getBoundingClientRect();
  for(let i=0;i<40;i++){
    const d=document.createElement('div');
    const s=Math.random()*3+0.8;
    d.style.position='fixed';
    d.style.left=(rect.left+rect.width/2)+(Math.random()-0.5)*60+'px';
    d.style.top=(rect.top+rect.height/2)+(Math.random()-0.5)*20+'px';
    d.style.width=d.style.height=s+'px';
    d.style.borderRadius='50%';
    d.style.background='rgba(255,255,255,0.95)';
    d.style.pointerEvents='none';
    d.style.zIndex=9996;
    fragLayer.appendChild(d);
    gsap.to(d,{
      y:'-='+(60+Math.random()*140),
      x:'+='+(Math.random()-0.5)*120,
      opacity:0,
      scale:Math.random()*1.8+0.2,
      duration:0.9+Math.random()*0.9,
      ease:"power3.out",
      onComplete:()=>d.remove()
    });
  }
  await new Promise(r=>setTimeout(r,900));
  await gsap.fromTo(desc,{opacity:0,y:10},{opacity:1,y:0,duration:1.1,ease:"elastic.out(1,0.6)"});
  desc.dataset.busy="0";
});

</script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  document.documentElement.classList.add("loaded");
  if (window.initParticles) window.initParticles();
  requestAnimationFrame(drawBackground);
});
</script>


</body>

</html>

